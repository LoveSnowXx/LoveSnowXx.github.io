---
title: 微信小程序生成海报
date: 2019-06-21 13:50:43
tags: [微信小程序, 海报]
cover_img:
feature_img:
description:
keywords:
---
最近接到一个需求，小程序生成海报图片，然后分享。偶然发现天猫现在分享也用了这个。

感觉技术还是很厉害，他规避了朋友圈不能分享的问题，大家可以在朋友圈分享图片，增大产品的触达用户。

网上给了一些案例，大多使用canvas实现的。有几个不错的库，[html2canvas](https://github.com/niklasvh/html2canvas)和[dom-to-image](https://github.com/tsayen/dom-to-image)。这两者需要操作dom的一些API，但由于微信小程序不能使用dom API。当时的想法是，wxml和html之间可以建一座桥梁，让wxml可以使用html的一些API。只是没有细心验证了。

然后决定自己画，可由于之前接触canvas太少了，画起来很吃力。然后有去找其他的解决方案。这时候遇到了[Painter](https://github.com/Kujiale-Mobile/Painter),目前采用这种方案解决的。

Painter也是通过canvas绘图解决的。它用起来就比较解决css了，通过指定的规则，写一些json数据，然后通过模版去解析。不支持z-index层级，目前没有满足我需求的一个地方。

canvas绘图的两个问题。绘图较慢，绘图模糊失真的问题。提出一个大胆假设，是否可以绘制矢量图。